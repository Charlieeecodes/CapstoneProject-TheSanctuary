<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Service Records | Admin Dashboard</title>
  <link rel="stylesheet" href="css/dashboard.css">
  <link rel="stylesheet" href="css/datarecords.css">
</head>
<body>
  <div class="admin-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <img src="icons/logo.PNG" alt="The Sanctuary Logo" class="logo-img" />
      </div>
      <nav>
        <ul>
          <li><a href="dashboard.html"><img src="icons/dashboard.jpg" alt="Dashboard Icon" class="nav-icon"> Dashboard</a></li>
          <li><a href="analytics.html"><img src="icons/graph.jpg" alt="Analytics Icon" class="nav-icon"> Analytics</a></li>
          <li><a href="datarecords.html" class="active"><img src="icons/folder.jpg" alt="Data Records Icon" class="nav-icon"> Service Records</a></li>
          <li><a href="inquiries.html"><img src="icons/paper.jpg" alt="Inquiries Icon" class="nav-icon"> Inquiries</a></li>
          <li><a href="feedbacks.html"><img src="icons/feedback.jpg" alt="Feedbacks Icon" class="nav-icon"> Feedbacks</a></li>
          <li><a href="../index.html"><img src="icons/logout.jpg" alt="Logout Icon" class="nav-icon"> Logout</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- âœ… Topbar -->
      <div class="topbar">
        <div class="topbar-left">
          <h2>Service Records</h2>
        </div>
        <div class="topbar-right">
          <span id="currentDateTime"></span>
          <div class="user-profile">
            <img src="../assets/images/user.png" alt="User" class="profile-icon">
            <div class="user-info">
              <strong>Maria Osana</strong><br>
              <small>Head Management</small>
            </div>
          </div>
        </div>
      </div>

      <!-- âœ… Page Content -->
      <div class="content">
        <h1>Service Records</h1>

        <!-- ðŸ” Search & Filter Bars -->
      <div class="record-controls">

        <!-- Wrap everything in a flex row -->
        <div class="record-toolbar">
          
          <!-- ðŸ” Search -->
          <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search records...">
          </div>

          <!-- ðŸ“ CSV Upload -->
          <div class="csv-upload-container">
            <div class="csv-header">
              <h3>Import Data from CSV</h3>
              <button id="previewCsvBtn">Preview CSV</button>
            </div>
            <div class="csv-file-row">
              <input type="file" id="csvFileInput" accept=".csv">
            </div>
            <div class="csv-buttons">
              <button id="confirmUploadBtn" style="display:none;">Confirm Upload</button>
            </div>
          </div>
          <!-- ðŸŽšï¸ Filter -->
          <div class="filter-container">
            <h3>Filter</h3>
            <div class="filter-bar">
              <div class="filter-group">
                <label for="filterService">Service:</label>
                <select id="filterService">
                  <option value="">All Services</option>

                  <optgroup label="Columbarium">
                    <option value="Unit with perpetual care">Unit with perpetual care</option>
                    <option value="Interment service">Interment service</option>
                  </optgroup>

                  <optgroup label="Cremation Services">
                    <option value="Adult cremation">Adult cremation</option>
                    <option value="Child cremation">Child cremation</option>
                    <option value="Baby cremation">Baby cremation</option>
                    <option value="Fetus cremation">Fetus cremation</option>
                    <option value="Bone cremation">Bone cremation</option>
                    <option value="Urns">Urns</option>
                    <option value="Keepsakes">Keepsakes</option>
                  </optgroup>

                  <optgroup label="Funeral Service">
                    <option value="Retrieval of cadaver">Retrieval of cadaver</option>
                    <option value="Embalming services">Embalming services</option>
                    <option value="Casket">Casket</option>
                    <option value="Chapel viewing">Chapel viewing</option>
                    <option value="House viewing or outside viewing">House viewing or outside viewing</option>
                    <option value="Hearse">Hearse</option>
                  </optgroup>

                  <optgroup label="Other Services">
                    <option value="Funeral Mass">Funeral Mass</option>
                    <option value="Function area">Function area</option>
                  </optgroup>
                </select>
              </div>

              <div class="filter-group">
                <label for="filterStatus">Status:</label>
                <select id="filterStatus">
                  <option value="">All</option>
                  <option value="Pending">Pending</option>
                  <option value="Completed">Completed</option>
                  <option value="Cancelled">Cancelled</option>
                </select>
              </div>

              <div class="filter-group">
                <label>Date Range:</label>
                <div class="date-range">
                  <input type="date" id="filterStartDate">
                  <span>to</span>
                  <input type="date" id="filterEndDate">
                </div>
              </div>
            </div>
          </div>
          <div>
          <button id="previewRecordsBtn" class="preview-btn">Preview Report</button>
          <button id="exportRecordsBtn" class="export-btn">Export Report</button>
          <button id="addRecordBtn">Add New Record</button>
          </div>
        </div>

        <!-- ðŸ“‹ CSV Preview Table (below toolbar) -->
        <div id="csvPreviewContainer" class="csv-preview">
          <table id="csvPreviewTable">
            <thead></thead>
            <tbody></tbody>
          </table>
        </div>

      </div>
      
      <!-- ðŸ§¾ Add Record Modal -->
      <div id="addRecordModal" class="record-modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="modalTitle">Add New Record</h2>
            <button id="closeRecordModal" class="close-btn">&times;</button>
          </div>

          <form id="recordForm">
            <div class="form-group">
              <label>Client Name</label>
              <input type="text" id="clientName" placeholder="Client Name" required>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="email" placeholder="Email" required>
            </div>
            <div class="form-group">
              <label>Contact</label>
              <input type="text" id="contact" placeholder="Contact Number" required>
            </div>
            <div class="form-group">
              <label>Address</label>
              <input type="text" id="address" placeholder="Address" required>
            </div>
            <div class="form-group">
              <label>Service Availed</label>
              <input type="text" id="serviceAvailed" placeholder="Service Availed" required>
            </div>
            <div class="form-group">
              <label>Service Cost</label>
              <input type="number" id="serviceCost" placeholder="Enter cost or price" min="0" required>
            </div>
            <div class="form-group inline">
              <div>
                <label>Date</label>
                <input type="date" id="recordDate" required>
              </div>
              <div>
                <label>Status</label>
                <select id="status" required>
                  <option value="Pending" selected>Pending</option>
                  <option value="Completed">Completed</option>
                  <option value="Cancelled">Cancelled</option>
                </select>
              </div>
            </div>
            <button type="submit" id="saveRecordBtn">Save Record</button>
          </form>
        </div>
      </div>

        <!-- ðŸ“‹ Records Table -->
        <table class="records-table">
          <thead>
            <tr>
              <th>Client Name</th>
              <th>Email</th>
              <th>Contact</th>
              <th>Address</th>
              <th>Service Availed</th>
              <th>Service Cost</th>
              <th>Date</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="recordTableBody">
            <tr>
              <td><button class="edit">Edit</button> <button class="delete">Delete</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>
  <div id="uploadNotification" class="notification-popup"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="js/datarecords.js"></script>
</body>
</html>
